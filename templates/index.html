<!DOCTYPE html>
<html>
<head>
  <title>Driver Based Forecasting</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    h2 {
      margin-top: 30px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .product-family-list {
      list-style-type: none;
      padding-left: 0;
    }

    .product-family-list label {
      font-weight: normal;
      display: inline-block;
      margin-right: 15px;
    }

    #chart-container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      margin-top: 30px;
    }

    .chart {
      width: 400px;
      height: 300px;
      margin: 15px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Driver Based Forecasting</h2>
    <form action="/plot" method="post">
      <div class="form-group">
        <label for="storeNo">Store No:</label>
        <select id="storeNo" name="storeNo" class="form-control" required>
          <option value="">Select Store No</option>
          <!-- Generate options dynamically from 1 to 54 -->
          {% for store_no in range(1, 55) %}
            <option value="{{ store_no }}">{{ store_no }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group">
        <label for="forecastDays">Days to Forecast:</label>
        <input type="number" id="forecastDays" name="forecastDays" class="form-control" min="10" max="75" required>
      </div>

      <div class="form-group">
        <label for="promotion">Promotion:</label>
        <input type="number" id="promotion" name="promotion" class="form-control" step="0.01" min="0.1" required>
      </div>

      <div class="form-group">
        <label for="productFamily">Product Family:</label>
        <select id="productFamily" name="productFamily" class="form-control" required>
          <option value="">Select Product Family</option>
          <option value="AUTOMOTIVE">AUTOMOTIVE</option>
          <option value="BABY CARE">BABY CARE</option>
          <option value="BEAUTY">BEAUTY</option>
          <option value="BEVERAGES">BEVERAGES</option>
          <option value="BOOKS">BOOKS</option>
          <option value="BREAD/BAKERY">BREAD/BAKERY</option>
          <option value="CELEBRATION">CELEBRATION</option>
          <option value="CLEANING">CLEANING</option>
          <option value="DAIRY">DAIRY</option>
          <option value="DELI">DELI</option>
          <option value="EGGS">EGGS</option>
          <option value="FROZEN FOODS">FROZEN FOODS</option>
          <option value="GROCERY I">GROCERY I</option>
          <option value="GROCERY II">GROCERY II</option>
          <option value="HARDWARE">HARDWARE</option>
          <option value="HOME AND KITCHEN I">HOME AND KITCHEN I</option>
          <option value="HOME AND KITCHEN II">HOME AND KITCHEN II</option>
          <option value="HOME APPLIANCES">HOME APPLIANCES</option>
          <option value="HOME CARE">HOME CARE</option>
          <option value="LADIESWEAR">LADIESWEAR</option>
          <option value="LAWN AND GARDEN">LAWN AND GARDEN</option>
          <option value="LINGERIE">LINGERIE</option>
          <option value="LIQUOR,WINE,BEER">LIQUOR,WINE,BEER</option>
          <option value="MAGAZINES">MAGAZINES</option>
          <option value="MEATS">MEATS</option>
          <option value="PERSONAL CARE">PERSONAL CARE</option>
          <option value="PET SUPPLIES">PET SUPPLIES</option>
          <option value="PLAYERS AND ELECTRONICS">PLAYERS AND ELECTRONICS</option>
          <option value="POULTRY">POULTRY</option>
          <option value="PREPARED FOODS">PREPARED FOODS</option>
          <option value="PRODUCE">PRODUCE</option>
          <option value="SCHOOL AND OFFICE SUPPLIES">SCHOOL AND OFFICE SUPPLIES</option>
          <option value="SEAFOOD">SEAFOOD</option>
        </select>
      </div>

      <div id="chart-container"></div>

      <button type="submit" class="btn btn-primary btn-lg btn-block">Generate Forecast</button>
    </form>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script>
    // JavaScript code to handle product family selection
    var productFamilySelect = document.getElementById("productFamily");
    var chartContainer = document.getElementById("chart-container");

    productFamilySelect.addEventListener("change", function () {
      var selectedProductFamily = productFamilySelect.value;

      // Remove existing charts
      while (chartContainer.firstChild) {
        chartContainer.removeChild(chartContainer.firstChild);
      }

      // Generate and append new chart based on selected product family
      if (selectedProductFamily) {
        var chartDiv = document.createElement("div");
        chartDiv.classList.add("chart");
        chartDiv.innerHTML = "Chart for " + selectedProductFamily;
        chartContainer.appendChild(chartDiv);
      }
    });
  </script>
</body>
</html>
