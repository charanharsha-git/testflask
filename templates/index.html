<!DOCTYPE html>
<html>
<head>
  <title>Driver Based Forecasting</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    .container {
      max-width: 800px;
      margin: 0 auto;
    }

    h2 {
      margin-top: 30px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .product-family-list {
      list-style-type: none;
      padding-left: 0;
    }

    .product-family-list label {
      font-weight: normal;
      display: inline-block;
      margin-right: 15px;
    }

    #chart-container {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      margin-top: 30px;
    }

    .chart {
      width: 400px;
      height: 300px;
      margin: 15px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Driver Based Forecasting</h2>
    <form action="/forecast" method="post">
      <div class="form-group">
        <label for="storeNo">Store No:</label>
        <select id="storeNo" name="storeNo" class="form-control" required>
          <option value="">Select Store No</option>
          <!-- Generate options dynamically from 1 to 54 -->
          {% for store_no in range(1, 55) %}
            <option value="{{ store_no }}">{{ store_no }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="form-group">
        <label for="forecastDays">Days to Forecast:</label>
        <input type="number" id="forecastDays" name="forecastDays" class="form-control" min="10" max="75" required>
      </div>

      <div class="form-group">
        <label>Promotions:</label>
        <div class="row">
          <div class="col-sm-4">
            <input type="number" name="promotion" class="form-control" step="0.01" min="0.1" required>
          </div>
          <div class="col-sm-4">
            <input type="number" name="promotion" class="form-control" step="0.01" min="0.1" required>
          </div>
          <div class="col-sm-4">
            <input type="number" name="promotion" class="form-control" step="0.01" min="0.1" required>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="productFamily">Product Family:</label>
        <ul class="product-family-list">
          <li>
            <label>
              <input type="checkbox" id="selectAllProductFamily"> Select All
            </label>
          </li>
          <li>
            <label>
              <input type="checkbox" name="productFamily" value="AUTOMOTIVE"> AUTOMOTIVE
            </label>
          </li>
          <li>
            <label>
              <input type="checkbox" name="productFamily" value="BABY CARE"> BABY CARE
            </label>
          </li>
          <li>
            <label>
              <input type="checkbox" name="productFamily" value="BEAUTY"> BEAUTY
            </label>
          </li>
          <!-- Add the remaining product families -->
        </ul>
      </div>

      <div id="chart-container"></div>

      <button type="submit" class="btn btn-primary btn-lg btn-block">Generate Forecast</button>
    </form>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script>
    // JavaScript code to handle product family selection
    var selectAllProductFamily = document.getElementById("selectAllProductFamily");
    var productFamilyCheckboxes = document.querySelectorAll("input[name='productFamily']");

    selectAllProductFamily.addEventListener("change", function () {
      var selectAll = selectAllProductFamily.checked;
      productFamilyCheckboxes.forEach(function (checkbox) {
        checkbox.checked = selectAll;
      });
    });
  </script>
</body>
</html>
